<div class="grid grid-cols-4 gap-4 p-6 rounded-xl mb-12">
  <!-- Δημιουργία των στηλών με βάση το status -->
  @for (col of ['to_do', 'in_progress', 'in_review', 'completed']; track col) {
    <div class="rounded-lg bg-kanban-col-background pb-6">
      <h2
        class="font-bold text-lg mb-3 text-white capitalize w-full py-4 px-4 rounded-t-xl"
        [ngClass]="{
          'bg-todo': col === 'to_do',
          'bg-inprogress': col === 'in_progress',
          'bg-inreview': col === 'in_review',
          'bg-completed': col === 'completed'
        }"
      >
        {{ col.replace('_', ' ') }}
      </h2>

      <!-- Ανάλογα με το task status μπαίνει στην σωστή στήλη -->
      @for (task of getTasksByStatus(col); track task._id) {
        <div class="bg-white rounded-lg shadow p-3 mb-3 flex flex-col space-y-2 mx-2">

          <!-- Τίτλος -->
          <div class="font-semibold text-black-text mb-3">{{ task.title }}</div>

          <!-- Περιγραφή -->
          <div class="text-black-text/70 mb-3 text-sm leading-snug line-clamp-5">{{ task.description }}</div>

          <!-- Tag -->
          <div class="max-w-max text-sm text-black-text rounded-xl px-2 py-1 mb-3 bg-light-background">
            {{ getTagName(task.tag_id) }}
          </div>

          <!-- Priority -->
          @if (task.status !== 'completed') {
            <div class="flex justify-between items-center mt-2">
               <div class="flex space-x-1 text-sm
                  max-w-max text-black-text rounded-xl px-3 py-2 bg-light-background">
                  <img src="images/fire.png" alt="fire" class="w-5 h-5 -translate-y-1/6">
                  <span class="font-medium">{{ task.priority }}</span>
                </div>
                <!-- Button delete -->
                <div class="flex justify-between items-center space-x-2 text-sm text-gray-500">
                  <button class="cursor-pointer px-3 py-2 bg-light-background rounded-xl"
                    (click)="openDeleteModal(task)">
                    <img src="images/trash.png" alt="trash" class="w-5 h-5">
                  </button>
                  <!-- Button edit -->
                  <button class="cursor-pointer px-3 py-2 bg-light-background rounded-xl"
                    (click)="openEditModal(task)">
                    <img src="images/edit-text.png" alt="trash" class="w-5 h-5">
                  </button>
                  <!-- Button backward -->
                  <div class="flex space-x-2">
                    @if (task.status !== 'to_do') {
                      <button class="cursor-pointer" (click)="moveStatus(task,'backward')">
                        <img src="images/left-arrow.png" alt="left-arrow" class="w-5 h-5">
                      </button>
                    }
                    <!-- Button forward -->
                    <button class="cursor-pointer" (click)="moveStatus(task,'forward')">
                      <img src="images/right-arrow.png" alt="right-arrow" class="w-5 h-5">
                    </button>
                  </div>
                </div>
            </div>
           
          } @else {
             <div class="flex justify-between items-center mt-2">
              <div class="flex space-x-1 text-sm
                  max-w-max text-black-text rounded-xl px-3 py-2 bg-light-background">
                <img src="images/check.png" alt="check" class="w-5 h-5">
                <span class="font-medium">{{ task.priority }}</span>
              </div>
              <button
                class="cursor-pointer px-3 py-2 bg-light-background rounded-xl"
                (click)="openDeleteModal(task)">
                <img src="images/trash.png" alt="trash" class="w-5 h-5">
              </button>
            </div>
            
          }
        </div>
      }
    </div>
  }
</div>